<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ma7ame7o&Y</title>
    <script src="https://unpkg.com/phosphor-icons"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo+Play:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lateef:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #FFB6C1;
            --secondary-color: #FFD1DC;
            --background-color: #FFF5F5;
            --card-color: #FFFFFF;
            --text-color: #5A5A5A;
            --header-color: #FFB6C1;
            --sidebar-width: 320px;
            --font-main: 'Tajawal', sans-serif;
            --font-alt: 'Cairo Play', sans-serif;
            --font-3: 'El Messiri', sans-serif;
            --font-4: 'Changa', sans-serif;
            --font-5: 'Amiri', serif;
            --font-6: 'Lateef', serif;
            --font-7: 'Rubik', sans-serif;
            --font-8: 'Almarai', sans-serif;
            --font-9: 'Reem Kufi', sans-serif;
            --font-10: 'Scheherazade New', serif;
            --font-11: 'Noto Naskh Arabic', serif;
            --font-12: 'Cairo Play', sans-serif;
            --border-radius: 16px;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --transition: all 0.3s ease;
            --font-size: 14px;
        }

        /* Dark Mode */
        .dark-mode {
            --primary-color: #FF85A2;
            --secondary-color: #FFB6C1;
            --background-color: #1a1a1a;
            --card-color: #2d2d2d;
            --text-color: #e0e0e0;
            --header-color: #FF85A2;
        }

        /* Ø§Ù„Ø«ÙŠÙ…Ø§Øª Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ø§Ù„ÙØ§ØªØ­Ø© */
        .theme-1 {
            --primary-color: #FFB6C1;
            --secondary-color: #FFD1DC;
            --background-color: #FFF5F5;
            --card-color: #FFFFFF;
            --text-color: #5A5A5A;
            --header-color: #FFB6C1;
        }

        .theme-2 {
            --primary-color: #B5EAD7;
            --secondary-color: #C7CEEA;
            --background-color: #F0F8FF;
            --card-color: #FFFFFF;
            --text-color: #5A5A5A;
            --header-color: #B5EAD7;
        }

        .theme-3 {
            --primary-color: #FFDAC1;
            --secondary-color: #E2F0CB;
            --background-color: #FFFBF0;
            --card-color: #FFFFFF;
            --text-color: #5A5A5A;
            --header-color: #FFDAC1;
        }

        .theme-4 {
            --primary-color: #C7CEEA;
            --secondary-color: #B5EAD7;
            --background-color: #F8F9FF;
            --card-color: #FFFFFF;
            --text-color: #5A5A5A;
            --header-color: #C7CEEA;
        }

        .theme-5 {
            --primary-color: #FF9AA2;
            --secondary-color: #FFB7B2;
            --background-color: #FFF0F0;
            --card-color: #FFFFFF;
            --text-color: #5A5A5A;
            --header-color: #FF9AA2;
        }

        .theme-6 {
            --primary-color: #A0E7E5;
            --secondary-color: #B4F8C8;
            --background-color: #F0FFFD;
            --card-color: #FFFFFF;
            --text-color: #5A5A5A;
            --header-color: #A0E7E5;
        }

        /* Ø§Ù„Ø®Ø·ÙˆØ· */
        .font-1 { font-family: var(--font-main); }
        .font-2 { font-family: var(--font-alt); }
        .font-3 { font-family: var(--font-3); }
        .font-4 { font-family: var(--font-4); }
        .font-5 { font-family: var(--font-5); }
        .font-6 { font-family: var(--font-6); }
        .font-7 { font-family: var(--font-7); }
        .font-8 { font-family: var(--font-8); }
        .font-9 { font-family: var(--font-9); }
        .font-10 { font-family: var(--font-10); }
        .font-11 { font-family: var(--font-11); }
        .font-12 { font-family: var(--font-12); }

        /* Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ø®Ø·ÙˆØ· */
        .font-size-small {
            --font-size: 12px;
        }

        .font-size-medium {
            --font-size: 14px;
        }

        .font-size-large {
            --font-size: 16px;
        }

        .font-size-xlarge {
            --font-size: 18px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            transition: var(--transition);
            font-size: var(--font-size);
        }

        /* Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .menu-btn {
            position: fixed;
            left: 15px;
            top: 15px;
            border: none;
            background: var(--primary-color);
            padding: 12px;
            border-radius: 12px;
            font-size: 20px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            z-index: 101;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            color: white;
        }

        .menu-btn:hover {
            transform: scale(1.05);
        }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .header {
            height: 65px;
            background: var(--header-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
        .sidebar {
            position: fixed;
            left: -100%;
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 0 20px 20px 0;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            overflow-y: auto;
            z-index: 200;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .dark-mode .sidebar {
            background: rgba(45, 45, 45, 0.95);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar .top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark-mode .sidebar .top {
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar .title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .sidebar .close {
            background: rgba(0, 0, 0, 0.05);
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            color: var(--text-color);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .dark-mode .sidebar .close {
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar .close:hover {
            background: var(--primary-color);
            color: white;
        }

        .sidebar .item {
            margin-bottom: 20px;
        }

        .drop-head {
            width: 100%;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0,0,0,0.05);
            padding: 15px 12px;
            font-size: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            border-radius: var(--border-radius);
            transition: var(--transition);
            color: var(--text-color);
            font-family: inherit;
            margin-bottom: 10px;
        }

        .dark-mode .drop-head {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .drop-head:hover {
            background: var(--primary-color);
            color: white;
        }

        .drop-head i {
            transition: var(--transition);
        }

        .drop-head.active i:last-child {
            transform: rotate(180deg);
        }

        .drop-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding-right: 15px;
        }

        .drop-body.open {
            max-height: 400px;
            overflow-y: auto;
        }

        .drop-body::-webkit-scrollbar {
            width: 4px;
        }

        .drop-body::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        .drop-body::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        .drop-body label {
            display: block;
            margin: 15px 0 10px 0;
            font-weight: 500;
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .colors {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .color:hover {
            transform: scale(1.1);
        }

        .color.active {
            border-color: var(--text-color);
            transform: scale(1.1);
        }

        .c1 { background: #FFB6C1; }
        .c2 { background: #B5EAD7; }
        .c3 { background: #FFDAC1; }
        .c4 { background: #C7CEEA; }
        .c5 { background: #FF9AA2; }
        .c6 { background: #A0E7E5; }

        .fonts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 20px;
        }

        .font-btn {
            padding: 10px 8px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: var(--border-radius);
            cursor: pointer;
            text-align: center;
            background: rgba(255,255,255,0.8);
            transition: var(--transition);
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .dark-mode .font-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-color);
        }

        .font-btn:hover {
            border-color: var(--primary-color);
        }

        .font-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: transparent;
        }

        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
        .extra-settings {
            margin-top: 20px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .dark-mode .setting-item {
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .setting-label {
            font-weight: 500;
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .toggle-switch {
            position: relative;
            width: 45px;
            height: 22px;
            background: rgba(0,0,0,0.1);
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        .dark-mode .toggle-switch {
            background: rgba(255,255,255,0.2);
        }

        .toggle-switch.active {
            background: var(--primary-color);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            transition: var(--transition);
        }

        .toggle-switch.active::after {
            left: 25px;
        }

        /* Ø­Ø¬Ù… Ø§Ù„Ø®Ø· */
        .font-size-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .font-size-btn {
            background: rgba(255,255,255,0.8);
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
        }

        .dark-mode .font-size-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-color);
        }

        .font-size-btn:hover {
            border-color: var(--primary-color);
        }

        .font-size-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: transparent;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notifications-container {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .notifications-container::-webkit-scrollbar {
            width: 6px;
        }

        .notifications-container::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        .dark-mode .notifications-container::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
        }

        .notifications-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        .notifications-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .notifications-title {
            font-weight: 600;
            font-size: 1rem;
        }

        .clear-all-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .clear-all-btn:hover {
            background: #ff4757;
        }

        .notification-item {
            background: rgba(255, 255, 255, 0.8);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 10px;
            transition: var(--transition);
            position: relative;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .dark-mode .notification-item {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .notification-item.hidden {
            opacity: 0.5;
            background: rgba(255,255,255,0.4);
        }

        .dark-mode .notification-item.hidden {
            background: rgba(255,255,255,0.05);
        }

        .notification-item:hover {
            background: rgba(255, 255, 255, 0.95);
        }

        .dark-mode .notification-item:hover {
            background: rgba(255,255,255,0.15);
        }

        .notification-content {
            margin-bottom: 12px;
        }

        .notification-message {
            line-height: 1.4;
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: var(--text-color);
        }

        .notification-time {
            font-size: 0.75rem;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .dark-mode .notification-time {
            color: #aaa;
        }

        .notification-time i {
            font-size: 0.7rem;
        }

        .notification-actions {
            display: flex;
            gap: 8px;
            justify-content: flex-start;
        }

        .notification-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: var(--transition);
            font-family: inherit;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .btn-delete {
            background: #ff6b6b;
            color: white;
        }

        .btn-hide {
            background: #ffd93d;
            color: #333;
        }

        .btn-delete:hover {
            background: #ff4757;
        }

        .btn-hide:hover {
            background: #ffc107;
        }

        .notification-count {
            background: #ff4757;
            color: white;
            border-radius: 10px;
            padding: 2px 8px;
            font-size: 0.7rem;
            margin-left: 8px;
        }

        .no-notifications {
            text-align: center;
            padding: 30px 20px;
            color: #666;
            font-size: 0.9rem;
        }

        .dark-mode .no-notifications {
            color: #aaa;
        }

        .no-notifications i {
            font-size: 2rem;
            margin-bottom: 8px;
            color: var(--primary-color);
            opacity: 0.3;
        }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-content {
            padding: 80px 15px 90px;
            max-width: 1000px;
            margin: 0 auto;
            transition: var(--transition);
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--card-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            font-size: 1.5rem;
            color: var(--primary-color);
            transition: var(--transition);
        }

        .card:hover .card-icon {
            transform: scale(1.1);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .card-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            align-self: flex-end;
            font-weight: 500;
            transition: var(--transition);
            font-family: inherit;
            font-size: 0.9rem;
        }

        .card-button:hover {
            background: var(--text-color);
        }

        /* Ø²Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */
        .quick-message-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 55px;
            height: 55px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow);
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            transition: var(--transition);
        }

        .quick-message-btn:hover {
            transform: scale(1.1);
        }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 300;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--card-color);
            width: 90%;
            max-width: 400px;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: var(--transition);
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .dark-mode .modal-header {
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .close-modal {
            background: rgba(0, 0, 0, 0.05);
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            color: var(--text-color);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .dark-mode .close-modal {
            background: rgba(255,255,255,0.1);
        }

        .close-modal:hover {
            background: var(--primary-color);
            color: white;
        }

        .message-textarea {
            width: 100%;
            height: 120px;
            padding: 15px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: var(--border-radius);
            resize: none;
            font-family: inherit;
            margin-bottom: 15px;
            font-size: 0.9rem;
            transition: var(--transition);
            background: var(--card-color);
            color: var(--text-color);
        }

        .dark-mode .message-textarea {
            border: 1px solid rgba(255,255,255,0.1);
        }

        .message-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .char-count {
            text-align: left;
            font-size: 0.8rem;
            color: #777;
            margin-bottom: 20px;
        }

        .dark-mode .char-count {
            color: #aaa;
        }

        .send-message-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            font-family: inherit;
        }

        .send-message-btn:hover {
            background: var(--text-color);
        }

        /* Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ¹ØªÙŠÙ… */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 150;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© */
        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .sidebar {
                width: 280px;
            }
            
            .fonts {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.3rem;
            }
            
            .card {
                padding: 15px;
            }
            
            .notification-actions {
                flex-direction: column;
            }
        }

        .loading {
            text-align: center;
            padding: 30px;
            color: var(--primary-color);
            grid-column: 1 / -1;
            font-size: 1rem;
        }

        .error {
            text-align: center;
            padding: 30px;
            color: #ff4757;
            grid-column: 1 / -1;
            font-size: 1rem;
        }
    </style>
</head>
<body class="theme-1 font-1 font-size-medium">
    <!-- Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
    <button id="menuBtn" class="menu-btn">
        <i class="ph-list"></i>
    </button>

    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <div class="header">
        <h1>Ma7ame7o&Y</h1>
    </div>

    <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
    <aside id="sidebar" class="sidebar">
        <div class="top">
            <span class="title">Ma7ame7o&Y</span>
            <button class="close"><i class="ph-x"></i></button>
        </div>

        <div class="item">
            <button class="drop-head">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="ph-gear"></i>
                    <span>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
                </div>
                <i class="ph-caret-down"></i>
            </button>

            <div class="drop-body">
                <label>ğŸ¨ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø«ÙŠÙ…</label>
                <div class="colors">
                    <span class="color c1 active" data-theme="theme-1"></span>
                    <span class="color c2" data-theme="theme-2"></span>
                    <span class="color c3" data-theme="theme-3"></span>
                    <span class="color c4" data-theme="theme-4"></span>
                    <span class="color c5" data-theme="theme-5"></span>
                    <span class="color c6" data-theme="theme-6"></span>
                </div>

                <label>ğŸ”¤ Ø§Ù„Ø®Ø·ÙˆØ·</label>
                <div class="fonts">
                    <button class="font-btn active" data-font="font-1">Ø·Ø¬ÙˆÙ„</button>
                    <button class="font-btn" data-font="font-2">Ù‚Ø§Ù‡Ø±Ø©</button>
                    <button class="font-btn" data-font="font-3">Ø§Ù„Ù…Ø³ÙŠØ±ÙŠ</button>
                    <button class="font-btn" data-font="font-4">ØªØºÙŠÙŠØ±</button>
                    <button class="font-btn" data-font="font-5">Ø£Ù…ÙŠØ±ÙŠ</button>
                    <button class="font-btn" data-font="font-6">Ù„Ø·ÙŠÙ</button>
                    <button class="font-btn" data-font="font-7">Ø±ÙˆØ¨ÙŠÙƒ</button>
                    <button class="font-btn" data-font="font-8">Ø§Ù„Ù…ÙØ±Ø§Ø¹ÙŠ</button>
                    <button class="font-btn" data-font="font-9">Ø±ÙÙŠÙ… ÙƒÙÙÙŠ</button>
                    <button class="font-btn" data-font="font-10">Ø´ÙÙ‡Ø±Ø²Ø§Ø¯</button>
                    <button class="font-btn" data-font="font-11">Ù†ÙØ³Ø®</button>
                    <button class="font-btn" data-font="font-12">Ù‚Ø§Ù‡Ø±Ø© 2</button>
                </div>

                <label>ğŸ“ Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</label>
                <div class="font-size-controls">
                    <button class="font-size-btn" data-size="small">ØµØºÙŠØ±</button>
                    <button class="font-size-btn active" data-size="medium">Ù…ØªÙˆØ³Ø·</button>
                    <button class="font-size-btn" data-size="large">ÙƒØ¨ÙŠØ±</button>
                    <button class="font-size-btn" data-size="xlarge">ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹</button>
                </div>

                <div class="extra-settings">
                    <label>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                    <div class="setting-item">
                        <span class="setting-label">ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„</span>
                        <div class="toggle-switch" id="darkMode"></div>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØµÙˆØª</span>
                        <div class="toggle-switch" id="soundNotifications"></div>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²</span>
                        <div class="toggle-switch" id="vibration"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="item">
            <button class="drop-head" id="notificationsHead">
                <div style="display: flex; align-items: center; gap: 10px; position: relative;">
                    <i class="ph-bell"></i>
                    <span>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
                    <span class="notification-count" id="notificationCount" style="display: none;">0</span>
                </div>
                <i class="ph-caret-down"></i>
            </button>

            <div class="drop-body">
                <div class="notifications-header">
                    <div class="notifications-title">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø©</div>
                    <button class="clear-all-btn" onclick="clearAllNotifications()">
                        <i class="ph-trash"></i>
                        Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
                    </button>
                </div>
                <div class="notifications-container" id="notificationsContainer">
                    <!-- Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù‡ØªØ¶Ø§Ù Ù‡Ù†Ø§ -->
                </div>
            </div>
        </div>
    </aside>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="main-content">
        <div class="cards-container" id="cards-container">
            <div class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰...</div>
        </div>
    </div>

    <!-- Ø²Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
    <button class="quick-message-btn">
        <i class="ph-chat-circle-text"></i>
    </button>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
    <div class="modal" id="message-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø³Ø±ÙŠØ¹Ø©</div>
                <button class="close-modal">
                    <i class="ph-x"></i>
                </button>
            </div>
            <textarea class="message-textarea" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§ (Ø¨Ø­Ø¯ Ø£Ù‚ØµÙ‰ 1000 Ø­Ø±Ù)" maxlength="1000"></textarea>
            <div class="char-count">0/1000</div>
            <button class="send-message-btn">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>

    <!-- Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ¹ØªÙŠÙ… -->
    <div class="overlay" id="overlay"></div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        let webData = [];
        let botData = {};
        let pollingInterval = null;
        let receivedMessageIds = new Set();

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function loadSavedSettings() {
            const savedTheme = localStorage.getItem('selectedTheme') || 'theme-1';
            const savedFont = localStorage.getItem('selectedFont') || 'font-1';
            const savedFontSize = localStorage.getItem('selectedFontSize') || 'medium';
            const darkMode = localStorage.getItem('darkMode') === 'true';
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ… ÙˆØ§Ù„Ø®Ø·
            document.body.className = `${savedTheme} ${savedFont} font-size-${savedFontSize}`;
            
            if (darkMode) {
                document.body.classList.add('dark-mode');
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø´Ø·Ø©
            document.querySelectorAll('.color').forEach(color => {
                color.classList.toggle('active', color.getAttribute('data-theme') === savedTheme);
            });
            
            document.querySelectorAll('.font-btn').forEach(font => {
                font.classList.toggle('active', font.getAttribute('data-font') === savedFont);
            });

            document.querySelectorAll('.font-size-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-size') === savedFontSize);
            });

            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
            const settings = ['darkMode', 'soundNotifications', 'vibration'];
            settings.forEach(setting => {
                const isActive = localStorage.getItem(setting) === 'true';
                const element = document.getElementById(setting);
                if (element) {
                    element.classList.toggle('active', isActive);
                }
            });

            // ØªØ­Ù…ÙŠÙ„ Ø±Ø³Ø§Ø¦Ù„ ØªÙ… Ø§Ø³ØªÙ‚Ø¨Ø§Ù„Ù‡Ø§ Ù…Ø³Ø¨Ù‚Ø§Ù‹
            const savedMessageIds = localStorage.getItem('receivedMessageIds');
            if (savedMessageIds) {
                receivedMessageIds = new Set(JSON.parse(savedMessageIds));
            }
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function saveSettings(theme, font, fontSize) {
            localStorage.setItem('selectedTheme', theme);
            localStorage.setItem('selectedFont', font);
            if (fontSize) {
                localStorage.setItem('selectedFontSize', fontSize);
            }
        }

        // Ø­ÙØ¸ Ø±Ø³Ø§Ø¦Ù„ ØªÙ… Ø§Ø³ØªÙ‚Ø¨Ø§Ù„Ù‡Ø§
        function saveReceivedMessageIds() {
            localStorage.setItem('receivedMessageIds', JSON.stringify([...receivedMessageIds]));
        }

        // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function updateNotificationCount() {
            const notifications = getNotifications();
            const hiddenNotifications = getHiddenNotifications();
            const now = Date.now();
            
            let visibleCount = 0;
            notifications.forEach((_, index) => {
                const isHidden = hiddenNotifications[index] && hiddenNotifications[index] > now;
                if (!isHidden) visibleCount++;
            });
            
            const countElement = document.getElementById('notificationCount');
            if (visibleCount > 0) {
                countElement.textContent = visibleCount;
                countElement.style.display = 'flex';
            } else {
                countElement.style.display = 'none';
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedSettings();
            loadJSONData();
            initEventListeners();
            updateSidebarNotifications();
            checkHiddenNotifications();
            updateNotificationCount();
        });

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„ÙØ§Øª JSON
        async function loadJSONData() {
            try {
                // ØªØ­Ù…ÙŠÙ„ web.json
                const webResponse = await fetch('web.json');
                if (!webResponse.ok) throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ web.json');
                webData = await webResponse.json();
                
                // ØªØ­Ù…ÙŠÙ„ bot.json
                const botResponse = await fetch('bot.json');
                if (!botResponse.ok) throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ bot.json');
                botData = await botResponse.json();
                
                initCards();
                initNotifications();
                startTelegramPolling();
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                document.getElementById('cards-container').innerHTML = 
                    '<div class="error">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.</div>';
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙƒØ±ÙˆØª
        function initCards() {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            webData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                
                card.innerHTML = `
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="ph-${getPhosphorIcon(item.icon)}"></i>
                        </div>
                        <div class="card-title">${item.title}</div>
                    </div>
                    <button class="card-button" onclick="window.open('${item.link}', '_blank')">Ø²ÙŠØ§Ø±Ø©</button>
                `;
                
                container.appendChild(card);
            });
        }

        // ØªØ­ÙˆÙŠÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª FontAwesome Ø¥Ù„Ù‰ Phosphor
        function getPhosphorIcon(faIcon) {
            const iconMap = {
                'fa-heart': 'heart',
                'fa-clock': 'clock',
                'fa-images': 'images',
                'fa-comments': 'chats',
                'fa-play-circle': 'play-circle',
                'fa-music': 'music-notes'
            };
            
            return iconMap[faIcon] || 'question';
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function initNotifications() {
            updateSidebarNotifications();
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù† localStorage
        function getNotifications() {
            const stored = localStorage.getItem('my_notifications');
            return stored ? JSON.parse(stored) : [];
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙŠ localStorage
        function saveNotifications(notifications) {
            localStorage.setItem('my_notifications', JSON.stringify(notifications));
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ©
        function getHiddenNotifications() {
            const stored = localStorage.getItem('hidden_notifications');
            return stored ? JSON.parse(stored) : {};
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ©
        function saveHiddenNotifications(hiddenNotifications) {
            localStorage.setItem('hidden_notifications', JSON.stringify(hiddenNotifications));
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ©
        function checkHiddenNotifications() {
            const hiddenNotifications = getHiddenNotifications();
            const now = Date.now();
            let updated = false;

            for (const [id, hideUntil] of Object.entries(hiddenNotifications)) {
                if (now > hideUntil) {
                    delete hiddenNotifications[id];
                    updated = true;
                }
            }

            if (updated) {
                saveHiddenNotifications(hiddenNotifications);
                updateSidebarNotifications();
                updateNotificationCount();
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
        function updateSidebarNotifications() {
            const container = document.getElementById('notificationsContainer');
            const notifications = getNotifications();
            const hiddenNotifications = getHiddenNotifications();
            const now = Date.now();
            
            if (notifications.length === 0) {
                container.innerHTML = `
                    <div class="no-notifications">
                        <i class="ph-bell-slash"></i>
                        <div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</div>
                    </div>
                `;
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø¢Ø®Ø± 5 Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
            const recentNotifications = notifications.slice(0, 5);
            let visibleCount = 0;
            container.innerHTML = '';
            
            recentNotifications.forEach((notification, index) => {
                const isHidden = hiddenNotifications[index] && hiddenNotifications[index] > now;
                
                if (isHidden) return; // ØªØ®Ø·ÙŠ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ©
                
                visibleCount++;
                const notificationElement = document.createElement('div');
                notificationElement.className = `notification-item ${isHidden ? 'hidden' : ''}`;
                notificationElement.setAttribute('data-index', index);
                
                notificationElement.innerHTML = `
                    <div class="notification-content">
                        <div class="notification-message">${notification.message}</div>
                        <div class="notification-time">
                            <i class="ph-clock"></i>
                            ${notification.time}
                        </div>
                    </div>
                    <div class="notification-actions">
                        <button class="notification-btn btn-delete" onclick="deleteNotification(${index})">
                            <i class="ph-trash"></i>
                            Ø­Ø°Ù
                        </button>
                        <button class="notification-btn btn-hide" onclick="hideNotification(${index})">
                            <i class="ph-eye-closed"></i>
                            Ø¥Ø®ÙØ§Ø¡
                        </button>
                    </div>
                `;
                
                container.appendChild(notificationElement);
            });

            // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø±Ø¦ÙŠØ©
            if (visibleCount === 0) {
                container.innerHTML = `
                    <div class="no-notifications">
                        <i class="ph-eye-closed"></i>
                        <div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</div>
                    </div>
                `;
            }
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±
        function checkNotification(message, messageId) {
            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‚Ø¯ ØªÙ… Ø§Ø³ØªÙ‚Ø¨Ø§Ù„Ù‡Ø§ Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ ØªØ¬Ø§Ù‡Ù„Ù‡Ø§
            if (receivedMessageIds.has(messageId)) {
                return false;
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
            receivedMessageIds.add(messageId);
            saveReceivedMessageIds();
            
            // Ø£Ø¶Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
            addNotification(message);
            return true;
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯
        function addNotification(message) {
            const notifications = getNotifications();
            const now = new Date();
            const timeString = now.toLocaleString('ar-EG');
            
            notifications.unshift({
                message: message,
                time: timeString
            });
            
            saveNotifications(notifications);
            updateSidebarNotifications();
            updateNotificationCount();
        }

        // Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø±
        function deleteNotification(index) {
            const notifications = getNotifications();
            notifications.splice(index, 1);
            saveNotifications(notifications);
            updateSidebarNotifications();
            updateNotificationCount();
        }

        // Ø¥Ø®ÙØ§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹Ø©
        function hideNotification(index) {
            const hiddenNotifications = getHiddenNotifications();
            const hideUntil = Date.now() + (60 * 60 * 1000); // Ø³Ø§Ø¹Ø© Ù…Ù† Ø§Ù„Ø¢Ù†
            
            hiddenNotifications[index] = hideUntil;
            saveHiddenNotifications(hiddenNotifications);
            updateSidebarNotifications();
            updateNotificationCount();
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function clearAllNotifications() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§ØªØŸ')) {
                saveNotifications([]);
                updateSidebarNotifications();
                updateNotificationCount();
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Telegram
        async function sendTelegramMessage(message) {
            try {
                if (!botData.telegram_token || !botData.chat_id) {
                    throw new Error('Ø¨ÙŠØ§Ù†Ø§Øª Telegram ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©');
                }

                const url = `https://api.telegram.org/bot${botData.telegram_token}/sendMessage`;
                const payload = {
                    chat_id: botData.chat_id,
                    text: message,
                    parse_mode: 'HTML'
                };

                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.ok) {
                    addNotification(`ğŸ“¨ Ø±Ø³Ø§Ù„ØªÙƒ: ${message}`);
                } else {
                    throw new Error(result.description || 'ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©');
                }

            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:', error);
            }
        }

        // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† Telegram
        async function getTelegramUpdates() {
            try {
                if (!botData.telegram_token) {
                    throw new Error('ØªÙˆÙƒÙ† Telegram ØºÙŠØ± Ù…ØªÙˆÙØ±');
                }

                const lastUpdateId = localStorage.getItem('last_update_id') || 0;
                const url = `https://api.telegram.org/bot${botData.telegram_token}/getUpdates?offset=${lastUpdateId + 1}`;

                const response = await fetch(url);
                const result = await response.json();

                if (result.ok && result.result.length > 0) {
                    result.result.forEach(update => {
                        if (update.message && update.message.text) {
                            const message = update.message.text;
                            const sender = update.message.from.first_name || 'Ù…Ø³ØªØ®Ø¯Ù…';
                            const messageId = update.message.message_id;
                            
                            const isNew = checkNotification(`ğŸ“© Ø±Ø³Ø§Ù„Ø© Ù…Ù† ${sender}: ${message}`, messageId);
                            
                            if (isNew) {
                                console.log('Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯:', message);
                            }
                        }
                        
                        // ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± update_id
                        localStorage.setItem('last_update_id', update.update_id);
                    });
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„:', error);
            }
        }

        // Ø¨Ø¯Ø¡ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† Telegram
        function startTelegramPolling() {
            // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ Ø¹Ù…Ù„ÙŠØ© Ø³Ø§Ø¨Ù‚Ø©
            if (pollingInterval) {
                clearInterval(pollingInterval);
            }
            
            // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
            pollingInterval = setInterval(getTelegramUpdates, 5000);
            
            // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙˆØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            getTelegramUpdates();
        }

        // ØªÙ‡ÙŠØ¦Ø© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function initEventListeners() {
            const sidebar = document.getElementById("sidebar");
            const menuBtn = document.getElementById("menuBtn");
            const closeBtn = document.querySelector(".close");

            // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
            menuBtn.onclick = () => {
                sidebar.classList.add("open");
                document.getElementById('overlay').classList.add('active');
            };

            closeBtn.onclick = () => {
                sidebar.classList.remove("open");
                document.getElementById('overlay').classList.remove('active');
            };

            document.getElementById('overlay').addEventListener('click', function() {
                sidebar.classList.remove('open');
                document.getElementById('message-modal').classList.remove('active');
                this.classList.remove('active');
            });

            // Dropdowns
            document.querySelectorAll(".drop-head").forEach(head => {
                head.onclick = () => {
                    const body = head.nextElementSibling;
                    body.classList.toggle("open");
                    head.classList.toggle("active");
                };
            });

            // ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ… Ù…Ø¹ ØªØ£Ø«ÙŠØ± fade ÙˆØ­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            document.querySelectorAll('.color').forEach(color => {
                color.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    const currentFont = document.body.className.match(/font-\d/)[0];
                    const currentFontSize = document.body.className.match(/font-size-\w+/)[0];
                    const isDarkMode = document.body.classList.contains('dark-mode');
                    
                    document.body.className = `${theme} ${currentFont} ${currentFontSize}`;
                    if (isDarkMode) document.body.classList.add('dark-mode');
                    
                    document.querySelectorAll('.color').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                    saveSettings(theme, currentFont);
                });
            });
            
            // ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ø· ÙˆØ­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            document.querySelectorAll('.font-btn').forEach(font => {
                font.addEventListener('click', function() {
                    const fontClass = this.getAttribute('data-font');
                    const currentTheme = document.body.className.match(/theme-\d/)[0];
                    const currentFontSize = document.body.className.match(/font-size-\w+/)[0];
                    const isDarkMode = document.body.classList.contains('dark-mode');
                    
                    document.body.className = `${currentTheme} ${fontClass} ${currentFontSize}`;
                    if (isDarkMode) document.body.classList.add('dark-mode');
                    
                    document.querySelectorAll('.font-btn').forEach(f => f.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                    saveSettings(currentTheme, fontClass);
                });
            });

            // ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø®Ø·
            document.querySelectorAll('.font-size-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const fontSize = this.getAttribute('data-size');
                    const currentTheme = document.body.className.match(/theme-\d/)[0];
                    const currentFont = document.body.className.match(/font-\d/)[0];
                    const isDarkMode = document.body.classList.contains('dark-mode');
                    
                    document.body.className = `${currentTheme} ${currentFont} font-size-${fontSize}`;
                    if (isDarkMode) document.body.classList.add('dark-mode');
                    
                    document.querySelectorAll('.font-size-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                    saveSettings(currentTheme, currentFont, fontSize);
                });
            });

            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ¨Ø¯ÙŠÙ„
            document.querySelectorAll('.toggle-switch').forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const settingId = this.id;
                    const isActive = this.classList.contains('active');
                    
                    localStorage.setItem(settingId, isActive);
                    
                    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                    if (settingId === 'darkMode') {
                        if (isActive) {
                            document.body.classList.add('dark-mode');
                        } else {
                            document.body.classList.remove('dark-mode');
                        }
                    }
                });
            });
            
            // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
            document.querySelector('.quick-message-btn').addEventListener('click', function() {
                document.getElementById('message-modal').classList.add('active');
                document.getElementById('overlay').classList.add('active');
            });
            
            document.querySelector('.close-modal').addEventListener('click', function() {
                document.getElementById('message-modal').classList.remove('active');
                document.getElementById('overlay').classList.remove('active');
            });
            
            // Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø±Ù ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
            const textarea = document.querySelector('.message-textarea');
            const charCount = document.querySelector('.char-count');
            
            textarea.addEventListener('input', function() {
                const length = this.value.length;
                charCount.textContent = `${length}/1000`;
                
                if (length > 1000) {
                    this.value = this.value.substring(0, 1000);
                    charCount.textContent = '1000/1000';
                }
            });
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
            document.querySelector('.send-message-btn').addEventListener('click', function() {
                const message = textarea.value.trim();
                
                if (message === '') {
                    return;
                }
                
                sendTelegramMessage(message);
                
                document.getElementById('message-modal').classList.remove('active');
                document.getElementById('overlay').classList.remove('active');
                
                textarea.value = '';
                charCount.textContent = '0/1000';
            });

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ© ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
            setInterval(checkHiddenNotifications, 60000);
        }
    </script>
</body>
</html>