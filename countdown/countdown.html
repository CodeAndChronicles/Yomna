<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown - عدّاد الحب</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #ff6b9d;
            --soft-pink: #ff9ac8;
            --light-pink: #ffd6e8;
            --dark-purple: #6a4c93;
            --medium-purple: #8b6bc7;
            --light-purple: #b39ddb;
            --white: #ffffff;
            --light-bg: #f8f9fa;
            --dark-bg: #1a1a2e;
            --text-dark: #2d3748;
            --text-light: #718096;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --shadow-dark: 0 10px 30px rgba(0, 0, 0, 0.3);
            --gradient-romantic: linear-gradient(135deg, #ff6b9d 0%, #6a4c93 100%);
            --gradient-soft: linear-gradient(135deg, #ff9ac8 0%, #8b6bc7 100%);
            --gradient-light: linear-gradient(135deg, #ffd6e8 0%, #b39ddb 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'El Messiri', sans-serif;
            background: var(--gradient-romantic);
            min-height: 100vh;
            padding: 20px;
            color: var(--white);
            transition: all 0.4s ease;
            line-height: 1.6;
        }

        body.light-mode {
            background: var(--gradient-light);
            color: var(--text-dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Date Time Bar */
        .datetime-bar {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(25px);
            border-radius: 25px;
            padding: 25px 35px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow: var(--shadow-dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 25px;
            position: relative;
            overflow: hidden;
        }

        .datetime-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-soft);
        }

        .light-mode .datetime-bar {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: var(--shadow);
        }

        .date-section, .time-section {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
            min-width: 250px;
        }

        .datetime-icon {
            font-size: 2.2rem;
            background: var(--gradient-soft);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .datetime-text {
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .date-label, .time-label {
            font-size: 1rem;
            color: var(--light-pink);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .light-mode .date-label,
        .light-mode .time-label {
            color: var(--medium-purple);
        }

        .date-value, .time-value {
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--gradient-soft);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            line-height: 1.2;
        }

        .light-mode .date-value,
        .light-mode .time-value {
            background: var(--gradient-romantic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            padding: 15px 25px;
            border-radius: 20px;
            color: var(--white);
            cursor: pointer;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            min-width: 160px;
            justify-content: center;
        }

        .theme-toggle:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.3);
        }

        .light-mode .theme-toggle {
            background: rgba(106, 76, 147, 0.1);
            color: var(--dark-purple);
            border: 1px solid rgba(106, 76, 147, 0.2);
        }

        .light-mode .theme-toggle:hover {
            background: rgba(106, 76, 147, 0.2);
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 60px;
            padding: 40px 20px;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: var(--gradient-soft);
            border-radius: 2px;
        }

        .main-title {
            font-size: 4.5rem;
            background: var(--gradient-soft);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .light-mode .main-title {
            background: var(--gradient-romantic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 1.5rem;
            color: var(--light-pink);
            margin-top: 15px;
            font-weight: 500;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .light-mode .subtitle {
            color: var(--medium-purple);
        }

        /* Sections Container */
        .sections-container {
            display: grid;
            gap: 50px;
            margin-bottom: 60px;
        }

        .section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px);
            border-radius: 30px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-dark);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-soft);
        }

        .light-mode .section {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: var(--shadow);
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .light-mode .section:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .light-mode .section-header {
            border-bottom: 2px solid rgba(106, 76, 147, 0.2);
        }

        .section-icon {
            font-size: 3rem;
            background: var(--gradient-soft);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .light-mode .section-icon {
            background: var(--gradient-romantic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-title {
            font-size: 2.5rem;
            color: var(--white);
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            font-weight: 700;
        }

        .light-mode .section-title {
            color: var(--dark-purple);
            text-shadow: none;
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
        }

        .card {
            width: 100%;
            min-height: 320px;
            background: var(--dark-bg);
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border-radius: 25px;
            box-shadow: var(--shadow-dark);
            padding: 30px 25px;
            text-align: center;
            transition: all 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .light-mode .card {
            background: var(--white);
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .card::before {
            content: "";
            position: absolute;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                from 0deg at 50% 50%,
                var(--primary-pink) 0%,
                var(--soft-pink) 25%,
                var(--medium-purple) 55%,
                var(--light-purple) 85%,
                var(--primary-pink) 100%
            );
            animation: rotateAnim 12s linear infinite;
            filter: blur(20px) brightness(1.1);
            z-index: 0;
        }

        .light-mode .card::before {
            background: conic-gradient(
                from 0deg at 50% 50%,
                var(--primary-pink) 0%,
                var(--soft-pink) 25%,
                var(--medium-purple) 55%,
                var(--light-purple) 85%,
                var(--primary-pink) 100%
            );
            filter: blur(15px) brightness(1.05);
        }

        .card::after {
            content: "";
            position: absolute;
            inset: 5px;
            background: var(--dark-bg);
            border-radius: 20px;
            z-index: 1;
            box-shadow: inset 0 0 30px rgba(255, 154, 158, 0.15);
        }

        .light-mode .card::after {
            background: var(--white);
            box-shadow: inset 0 0 30px rgba(102, 126, 234, 0.08);
        }

        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
        }

        .light-mode .card:hover {
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .card-content {
            position: relative;
            z-index: 2;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
        }

        .card-header {
            margin-bottom: 25px;
            width: 100%;
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            background: var(--gradient-soft);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .light-mode .card-icon {
            background: var(--gradient-romantic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card-title {
            font-size: 1.8rem;
            color: var(--white);
            text-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
            margin-bottom: 8px;
            font-weight: 700;
            line-height: 1.3;
        }

        .light-mode .card-title {
            color: var(--dark-purple);
            text-shadow: none;
        }

        .card-subtitle {
            color: var(--light-pink);
            font-size: 1.1rem;
            font-weight: 500;
        }

        .light-mode .card-subtitle {
            color: var(--medium-purple);
        }

        /* Time Grids */
        .time-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            width: 100%;
            margin-top: 20px;
        }

        .time-unit {
            background: rgba(255, 255, 255, 0.12);
            padding: 20px 12px;
            border-radius: 16px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .time-unit::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-soft);
        }

        .time-unit:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .light-mode .time-unit {
            background: rgba(106, 76, 147, 0.08);
            border: 1px solid rgba(106, 76, 147, 0.15);
        }

        .light-mode .time-unit:hover {
            background: rgba(106, 76, 147, 0.12);
        }

        .time-value {
            font-size: 2.2rem;
            font-weight: 700;
            background: var(--gradient-soft);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block;
            line-height: 1;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .light-mode .time-value {
            background: var(--gradient-romantic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .time-label {
            font-size: 0.9rem;
            color: var(--light-pink);
            margin-top: 5px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .light-mode .time-label {
            color: var(--medium-purple);
        }

        .event-time-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            width: 100%;
            margin-top: 15px;
        }

        .event-time-unit {
            background: rgba(255, 255, 255, 0.12);
            padding: 18px 10px;
            border-radius: 14px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .event-time-unit::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-soft);
        }

        .event-time-unit:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.18);
        }

        .light-mode .event-time-unit {
            background: rgba(106, 76, 147, 0.08);
            border: 1px solid rgba(106, 76, 147, 0.15);
        }

        .light-mode .event-time-unit:hover {
            background: rgba(106, 76, 147, 0.12);
        }

        .event-time-value {
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--gradient-soft);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block;
            line-height: 1;
            margin-bottom: 6px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .light-mode .event-time-value {
            background: var(--gradient-romantic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .event-time-label {
            font-size: 0.8rem;
            color: var(--light-pink);
            margin-top: 4px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .light-mode .event-time-label {
            color: var(--medium-purple);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 20px;
            color: var(--light-pink);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 20px;
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--gradient-soft);
            border-radius: 2px;
        }

        .light-mode .footer {
            color: var(--medium-purple);
            border-top: 1px solid rgba(106, 76, 147, 0.2);
        }

        .update-time {
            color: var(--soft-pink);
            font-weight: 700;
            font-size: 1.1rem;
        }

        .light-mode .update-time {
            color: var(--dark-purple);
        }

        .footer-text {
            margin-top: 15px;
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* Loading States */
        .loading {
            text-align: center;
            padding: 50px 20px;
            color: var(--soft-pink);
            grid-column: 1 / -1;
        }

        .light-mode .loading {
            color: var(--dark-purple);
        }

        .spinner {
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 5px solid var(--soft-pink);
            width: 60px;
            height: 60px;
            animation: spin 1.2s linear infinite;
            margin: 0 auto 25px;
        }

        .light-mode .spinner {
            border: 5px solid rgba(106, 76, 147, 0.2);
            border-top: 5px solid var(--dark-purple);
        }

        /* Animations */
        @keyframes rotateAnim {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .heart-pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .cards-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 3.2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .card {
                min-height: 300px;
            }
            
            .datetime-bar {
                flex-direction: column;
                text-align: center;
                gap: 20px;
                padding: 20px;
            }
            
            .date-section, .time-section {
                min-width: auto;
                justify-content: center;
            }
            
            .section {
                padding: 30px 25px;
            }
            
            .time-value {
                font-size: 2rem;
            }
            
            .event-time-value {
                font-size: 1.6rem;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: 2.5rem;
            }
            
            .section {
                padding: 25px 20px;
            }
            
            .section-header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .time-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }
            
            .time-value {
                font-size: 1.8rem;
            }
            
            .event-time-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .card {
                padding: 25px 20px;
            }
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .error {
            color: #ff6b6b;
            text-align: center;
            padding: 20px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Date Time Bar -->
        <div class="datetime-bar float-animation">
            <div class="date-section">
                <i class="fas fa-calendar-heart datetime-icon"></i>
                <div class="datetime-text">
                    <div class="date-label">التاريخ اليوم</div>
                    <div id="current-date" class="date-value">--/--/----</div>
                </div>
            </div>
            
            <div class="time-section">
                <i class="fas fa-clock datetime-icon"></i>
                <div class="datetime-text">
                    <div class="time-label">الوقت الحالي</div>
                    <div id="current-time" class="time-value">--:--:--</div>
                </div>
            </div>
            
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
                <span>الوضع الليلي</span>
            </button>
        </div>

        <header class="header">
            <h1 class="main-title">Countdown - عدّاد الحب</h1>
            <p class="subtitle">رحلة حبنا في كل لحظة تمر، وذكرى جميلة في كل ثانية</p>
        </header>

        <div class="sections-container">
            <section class="section">
                <div class="section-header">
                    <i class="fas fa-heart section-icon heart-pulse"></i>
                    <h2 class="section-title">أعمارنا الجميلة</h2>
                </div>
                <div id="birthdays-container" class="cards-grid">
                    <div class="loading">
                        <div class="spinner"></div>
                        جاري تحميل الأعمار...
                    </div>
                </div>
            </section>

            <section class="section">
                <div class="section-header">
                    <i class="fas fa-star section-icon"></i>
                    <h2 class="section-title">لحظاتنا الخاصة</h2>
                </div>
                <div id="events-container" class="cards-grid">
                    <div class="loading">
                        <div class="spinner"></div>
                        جاري تحميل الأحداث...
                    </div>
                </div>
            </section>
        </div>

        <footer class="footer">
            <p>آخر تحديث: <span id="last-update" class="update-time">--:--:--</span></p>
            <p class="footer-text">كل ثانية معك هي ذكرى تظل محفورة في القلب</p>
        </footer>
    </div>

    <script>
        // تحديث التاريخ والوقت
        function updateDateTime() {
            const now = new Date();
            
            // تحديث التاريخ
            const dateOptions = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('current-date').textContent = now.toLocaleDateString('ar-SA', dateOptions);
            
            // تحديث الوقت
            const timeOptions = { 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                hour12: true 
            };
            document.getElementById('current-time').textContent = now.toLocaleTimeString('ar-SA', timeOptions);
        }

        // تحديث التاريخ والوقت كل ثانية
        setInterval(updateDateTime, 1000);
        updateDateTime();

        // تبديل الوضع الليلي/النهاري
        document.getElementById('themeToggle').addEventListener('click', function() {
            document.body.classList.toggle('light-mode');
            const icon = this.querySelector('i');
            const text = this.querySelector('span');
            
            if (document.body.classList.contains('light-mode')) {
                icon.className = 'fas fa-sun';
                text.textContent = 'الوضع النهاري';
            } else {
                icon.className = 'fas fa-moon';
                text.textContent = 'الوضع الليلي';
            }
        });

        // دالة لحساب العمر
        function calculateAge(birthDate) {
            const now = new Date();
            let years = now.getFullYear() - birthDate.getFullYear();
            let months = now.getMonth() - birthDate.getMonth();
            let days = now.getDate() - birthDate.getDate();

            if (days < 0) {
                months--;
                days += new Date(now.getFullYear(), now.getMonth(), 0).getDate();
            }
            if (months < 0) {
                years--;
                months += 12;
            }

            return { years, months, days };
        }

        // دالة لحساب مدة الأحداث
        function relationshipDuration(startDate) {
            const now = new Date();
            let diff = now - startDate;

            const seconds = Math.floor(diff / 1000) % 60;
            const minutes = Math.floor(diff / (1000 * 60)) % 60;
            const hours = Math.floor(diff / (1000 * 60 * 60)) % 24;
            let days = Math.floor(diff / (1000 * 60 * 60 * 24));

            const years = Math.floor(days / 365);
            days -= years * 365;
            const months = Math.floor(days / 30);
            days -= months * 30;

            return { years, months, days, hours, minutes, seconds };
        }

        // تحميل البيانات وعرضها
        document.addEventListener('DOMContentLoaded', function() {
            fetch('data.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    const birthdaysContainer = document.getElementById('birthdays-container');
                    birthdaysContainer.innerHTML = '';
                    
                    if (data.birthdays && data.birthdays.length > 0) {
                        data.birthdays.forEach(person => {
                            const age = calculateAge(new Date(person.date));
                            const card = createBirthdayCard(person.name, age);
                            birthdaysContainer.appendChild(card);
                        });
                    } else {
                        birthdaysContainer.innerHTML = '<div class="error">لا توجد بيانات للأعمار</div>';
                    }

                    const eventsContainer = document.getElementById('events-container');
                    eventsContainer.innerHTML = '';
                    
                    if (data.events && data.events.length > 0) {
                        data.events.forEach(event => {
                            const card = createEventCard(event);
                            eventsContainer.appendChild(card);
                            startEventCountdown(card, event.datetime);
                        });
                    } else {
                        eventsContainer.innerHTML = '<div class="error">لا توجد بيانات للأحداث</div>';
                    }
                    
                    document.getElementById('last-update').textContent = new Date().toLocaleString('ar-SA');
                })
                .catch(error => {
                    console.error('حدث خطأ:', error);
                    document.getElementById('birthdays-container').innerHTML = 
                        '<div class="error">حدث خطأ في تحميل البيانات. تأكد من وجود ملف data.json</div>';
                    document.getElementById('events-container').innerHTML = '';
                });
        });

        // إنشاء كارت العمر
        function createBirthdayCard(name, age) {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-content">
                    <div class="card-header">
                        <i class="fas fa-user-circle card-icon"></i>
                        <h3 class="card-title">${name}</h3>
                        <p class="card-subtitle">عمر الحب والذكريات</p>
                    </div>
                    <div class="time-grid">
                        <div class="time-unit">
                            <span class="time-value">${age.years}</span>
                            <span class="time-label">سنة</span>
                        </div>
                        <div class="time-unit">
                            <span class="time-value">${age.months}</span>
                            <span class="time-label">شهر</span>
                        </div>
                        <div class="time-unit">
                            <span class="time-value">${age.days}</span>
                            <span class="time-label">يوم</span>
                        </div>
                    </div>
                </div>
            `;
            return card;
        }

        // إنشاء كارت الحدث
        function createEventCard(event) {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-content">
                    <div class="card-header">
                        <i class="fas ${getEventIcon(event.name)} card-icon"></i>
                        <h3 class="card-title">${event.name}</h3>
                        <p class="card-subtitle">رحلة حب مستمرة</p>
                    </div>
                    <div class="event-time-grid" id="event-${event.name.replace(/\s+/g, '-')}">
                        <!-- سيتم ملؤه ديناميكياً -->
                    </div>
                </div>
            `;
            return card;
        }

        // بدء العد التنازلي للحدث
        function startEventCountdown(card, datetime) {
            const timeGrid = card.querySelector('.event-time-grid');
            
            function updateEvent() {
                const duration = relationshipDuration(new Date(datetime));
                timeGrid.innerHTML = `
                    <div class="event-time-unit">
                        <span class="event-time-value">${duration.years}</span>
                        <span class="event-time-label">سنة</span>
                    </div>
                    <div class="event-time-unit">
                        <span class="event-time-value">${duration.months}</span>
                        <span class="event-time-label">شهر</span>
                    </div>
                    <div class="event-time-unit">
                        <span class="event-time-value">${duration.days}</span>
                        <span class="event-time-label">يوم</span>
                    </div>
                    <div class="event-time-unit">
                        <span class="event-time-value">${duration.hours}</span>
                        <span class="event-time-label">ساعة</span>
                    </div>
                    <div class="event-time-unit">
                        <span class="event-time-value">${duration.minutes}</span>
                        <span class="event-time-label">دقيقة</span>
                    </div>
                    <div class="event-time-unit">
                        <span class="event-time-value">${duration.seconds}</span>
                        <span class="event-time-label">ثانية</span>
                    </div>
                `;
            }

            updateEvent();
            setInterval(updateEvent, 1000);
        }

        // الحصول على الأيقونة المناسبة للحدث
        function getEventIcon(eventName) {
            const icons = {
                'علاقة': 'fa-heart',
                'حب': 'fa-heart',
                'زواج': 'fa-ring',
                'لقاء': 'fa-users',
                'ذكرى': 'fa-calendar-heart',
                'سفر': 'fa-plane',
                'منزل': 'fa-home',
                'عمل': 'fa-briefcase',
                'تخرج': 'fa-graduation-cap'
            };
            
            for (const [key, icon] of Object.entries(icons)) {
                if (eventName.includes(key)) {
                    return icon;
                }
            }
            
            return 'fa-heart';
        }
    </script>
</body>
</html>